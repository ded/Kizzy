/*! Kizzy - a cross-browser LocalStorage API
  * Copyright: Dustin Diaz 2011
  * https://github.com/ded/kizzy
  * License: MIT
  */
!function(a,b,c){function E(a){return new D(a)}function D(a){this.ns=a,this._=JSON.parse(n(a)||"{}")}function C(){this._={}}function B(){while(k.firstChild)k.removeChild(k.firstChild);i.save(c)}function A(a){x(a)&&k.removeChild(node),i.save(c)}function z(a,b){var d=x(a);d?d.setAttribute("value",b):(d=j.createNode(1,"item",""),d.setAttribute("key",a),d.setAttribute("value",b),k.appendChild(d)),i.save(c);return b}function y(a){var b=x(a),c=null;b&&(c=b.getAttribute("value"));return c}function x(a){var b=k.childNodes,c,d=null;for(var e=0,f=b.length;e<f;e++){c=b.item(e);if(c.getAttribute("key")==a){d=c;break}}return d}function w(){localStorage.clear()}function v(a){delete localStorage[a]}function u(a,b){localStorage[a]=b;return b}function t(a){return localStorage[a]}function s(a){return typeof a=="number"&&isFinite(a)}function r(a,b){a._[b]&&a._[b].e&&a._[b].e<q()&&a.remove(b)}function q(){return+(new Date)}function d(){}var e,f=0,g=function(){return 1};try{e=!!localStorage||!!globalStorage,localStorage||(localStorage=globalStorage[c]),f=1}catch(h){f=0;try{if(b.documentElement.addBehavior){f=0,e=1;var i=b.documentElement;i.addBehavior("#default#userData"),i.load(c);var j=i.xmlDocument,k=j.documentElement}}catch(l){e=!1}}var m=d,n=d,o=d,p=d;e&&(m=f?u:z,n=f?t:y,o=f?v:A,p=f?w:B,g=function(a){try{m(a.ns,JSON.stringify(a._));return 1}catch(b){return 0}}),C.prototype={set:function(a,b,c){this._[a]={value:b,e:s(c)?q()+c:0},g(this)||this.remove(a);return b},get:function(a){r(this,a);return this._[a]?this._[a].value:undefined},remove:function(a){delete this._[a],g(this)},clear:function(){this._={},g(this)}},D.prototype=C.prototype,E.remove=o,E.clear=p,a.kizzy=E,typeof module!="undefined"&&module.exports&&(module.exports.cache=E)}(this,document,document.domain)